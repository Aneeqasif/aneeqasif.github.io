/**
 * Org-mode tag styling for Markdown output.
 * - Hides attachment-only tags
 * - Renders other tags as pill badges
 */
.tag {
  --org-tag-border: var(--primary);
  --org-tag-bg: color-mix(in srgb, var(--primary) 14%, transparent);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.3rem;
  margin-inline-start: 0.45rem;
  padding: 0.28em 0.95em 0.34em;
  border-radius: 0.5rem;
  border: 1.5px dashed var(--org-tag-border);
  font-size: clamp(0.9rem, 0.88rem + 0.18vw, 1.08rem);
  font-weight: 600;
  line-height: 1.15;
  white-space: nowrap;
  vertical-align: middle;
  color: var(--primary);
  background-color: var(--btn-plain-bg-hover);
  background-color: var(--org-tag-bg);
  transition: color 0.2s ease, border-color 0.2s ease,
    background-color 0.2s ease;
}

@supports (color: color-mix(in oklch, black 50%, white 50%)) {
  .tag {
    --org-tag-bg: color-mix(in oklch, var(--primary) 14%, var(--card-bg) 86%);
    --org-tag-border: color-mix(
      in oklch,
      var(--primary) 56%,
      var(--card-bg) 44%
    );
  }
}

.tag[tag-name="ATTACH"] {
  display: none !important;
}

.tag:not([tag-name="ATTACH"]) + .tag:not([tag-name="ATTACH"]) {
  margin-inline-start: 0.45rem;
}

.tag .smallcaps {
  font-variant: small-caps;
  letter-spacing: 0.02em;
  font-size: 0.95em;
  text-transform: none;
}

@media (prefers-color-scheme: dark) {
  .tag {
    color: var(--primary);
    --org-tag-bg: var(--btn-plain-bg-active);
    --org-tag-border: var(--primary);
  }

  @supports (color: color-mix(in oklch, black 50%, white 50%)) {
    .tag {
      color: color-mix(in oklch, var(--primary) 82%, white 18%);
      --org-tag-bg: color-mix(in oklch, var(--primary) 26%, var(--card-bg) 74%);
      --org-tag-border: color-mix(
        in oklch,
        var(--primary) 62%,
        var(--card-bg) 38%
      );
    }
  }
}
