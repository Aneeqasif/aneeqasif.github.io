---
import { Icon } from "astro-icon/components";
---

<!-- There can't be a filter on parent element, or it will break `fixed` -->
<div class="back-to-top-wrapper">
    <div id="back-to-top-btn" class="back-to-top-btn hide flex items-center justify-center overflow-hidden transition" onclick="backToTop()">
        <button aria-label="Back to Top" class="btn-card w-full h-full flex items-center justify-center">
            <Icon name="material-symbols:keyboard-arrow-up-rounded" class="mx-auto"></Icon>
        </button>
    </div>
</div>

<style lang="stylus">
.back-to-top-wrapper
    position: fixed
    right: unquote('max(2rem, calc((100vw - var(--page-width)) / 2 + 2.75rem))')
    bottom: 2rem
    width: 3rem
    height: 3rem
    pointer-events: none
    z-index: 50

.back-to-top-btn
    color: var(--btn-content)
    font-size: 1.875rem
    font-weight: bold
    border: 2px solid unquote('color-mix(in srgb, var(--btn-card-bg-hover) 100%, transparent)')
    position: relative
    opacity: 1
    cursor: pointer
    transform: scale(1)
    pointer-events: auto
    transition: all 0.3s ease
    border-radius: 50%
    width: 3rem
    height: 3rem
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 2px 4px rgba(0, 0, 0, 0.1)
    &:hover
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2), 0 3px 6px rgba(0, 0, 0, 0.15)
        border-color: unquote('color-mix(in srgb, var(--primary) 50%, transparent)')
    button
        border-radius: 50%
        background-color: unquote('color-mix(in srgb, var(--card-bg) 85%, black 15%)')
        &:hover
            background-color: var(--btn-card-bg-hover)
        &:active
            background-color: var(--btn-card-bg-active)
    i
        font-size: 1.5rem
    &.hide
        transform: scale(0.8)
        opacity: 0
        pointer-events: none
    &:active
      transform: scale(0.9)

@media (max-width: 640px)
    .back-to-top-wrapper
        bottom: 3.25rem

</style>

<script is:raw is:inline>
function backToTop() {
    window.scroll({ top: 0, behavior: 'smooth' });
}
</script>
